import random

def skpbConstrain(gen, list_skpb):
    pnow = 0
    for i in range(len(list_skpb)):
        # Fourth Constraint: Sesi SKPB dan jurusan minimal 1 jam
        if gen[2:4] == "SK":
            if abs(int(gen[12:15]) - int(list_skpb[i][12:15])) < 2:
                pnow = pnow + 1
                print("P: " + gen )
    return pnow

dosenPrefrensiDict = {'SD': ['101', '102', '103', '104', '201', '202', '203', '204', '301', '302', '303', '304', '401', '402', '403', '404', '501', '502', '503', '504'], 'RA': ['105', '106', '107', '108', '109', '110', '205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310', '405', '406', '407', '408', '409', '410', '505', '506', '507', '508', '509', '510'], 'RM': ['101', '102', '103', '104', '201', '202', '203', '204', '301', '302', '303', '304', '401', '402', '403', '404', '501', '502', '503', '504'], 'WS': ['105', '106', '107', '108', '205', '206', '207', '208', '305', '306', '307', '308', '405', '406', '407', '408', '505', '506', '507', '508'], 'TA': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308'], 'BM': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'BJ': ['201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408'], 'BH': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'AM': ['201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408'], 'HB': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', 
'509', '510'], 'HS': ['301', '302', '303', '304', '401', '402', '403', '404'], 'BS': ['105', '106', '107', '108', '109', '110', '305', '306', '307', '308', '309', '310', '405', '406', '407', '408', '409', '410'], 'YP': ['205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310', '405', '406', '407', '408', '409', '410'], 'DP': ['201', '202', '203', '204', '301', '302', '303', '304', '401', '402', '403', '404'], 'AR': ['301', '302', '303', '304', '305', '306', '307', '308'], 'RL': ['301', '302', '303', '304', '305', '306', '307', '308'], 'DS': ['105', '106', '107', '108', '205', '206', '207', '208', '305', '306', '307', '308', '405', '406', '407', '408'], 'FB': ['201', '202', '203', '204', '205', '206', '207', '208', 
'209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310'], 'AB': ['105', '106', '107', '108', '109', '110', '205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310', '405', '406', '407', '408', '409', '410', '505', '506', '507', '508', '509', '510'], 'IS': ['105', '106', '107', '108', '109', '110', '205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310', '405', '406', 
'407', '408', '409', '410', '505', '506', '507', '508', '509', '510'], 'RR': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'AL': ['101', '102', 
'103', '104', '105', '106', '107', '108', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408'], 'MN': ['101', '102', '103', '104', '201', '202', '203', '204', '301', '302', '303', '304', '401', '402', '403', '404', '501', '502', '503', '504'], 'MK': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', 
'301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'KR': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'SC': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'OJ': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'ML': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'RJ': ['205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310', '405', '406', '407', '408', '409', '410'], 'MR': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'RN': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', 
'205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410'], 'SR': ['205', '206', '207', '208', '209', '210', '305', '306', '307', '308', '309', '310'], 'UY': ['209', '210', '309', '310', '409', '410'], 'DO': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'ST': ['201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308'], 'DA': ['205', '206', '207', '208', '305', '306', '307', '308', '405', '406', '407', '408'], 'NS': ['301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'AY': ['209', '210'], 'CF': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308'], 'DH': ['105', '106', '107', '108', '109', '110', '305', '306', '307', '308', '309', '310', '505', '506', '507', '508', '509', '510'], 'HT': ['209', '210', '309', '310'], 'AW': ['201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'AS': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'BA': ['101', '102', '103', '104', '105', '106', '107', '108', '201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308', '401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'JL': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210'], 'VH': ['401', '402', '403', '404', '405', '406', '407', '408', '501', '502', '503', '504', '505', '506', '507', '508'], 'DZ': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'HF': ['201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410'], 'SA': ['201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'DH ': ['101', 
'102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'IM': ['201', '202', '203', '204', '205', '206', '207', '208', '301', '302', '303', '304', '305', '306', '307', '308'], 'MM': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SF': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SW': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SI': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', 
'206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SM': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SS': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'UG': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', 
'404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510'], 'SN': ['101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '401', '402', '403', '404', '405', '406', '407', '408', '409', '410', '501', '502', '503', '504', '505', '506', '507', '508', '509', '510']}
def prefrensiConstraint(gen):
    qnow = 0
    print(gen)
    if gen[12:15] not in dosenPrefrensiDict[gen[0:2]]:
        qnow = qnow + 1
    return qnow
def main():
    data_ruangan=[
        "101",
        "102",
        "103",
        "104",
        "501",
        "502",
        "106",
        "108",
        "301",
        "302",
    ]


# First number means # day of the week
# The rest is the session of the day
# Ex. 301 = Wednesday, Session 1
# Ex. 110 = Monday, Session 10
# A session means an hour, Session 1 starts from 7.00
# That means Sesssion 2 is 8.00, Session 3 is 9.00, and so on.
    sesi=[]
    for i in range(1,6):
        for j in range(1,10):
            temp_sesi=""
            if j < 10:
                sesi.append(str(i)+"0"+str(j))
            else:
                sesi.append(str(i)+str(j))
    individu = ['SDIF4201A108101', 'RAIF4201A111109', 'RAIF4201I301107', 'RAIF4947A112309', 'RMIF4602A103405', 'RMIF4602B104301', 'WSIF4201C107209', 'WSIF4201D105507', 'WSIF4201E102103', 'WSIF4402A302509', 'TAIF4201F501305', 'TAIF4201G101401', 'BMIF4402I106201', 'BJIF4402B108403', 'BJIF4602C111505', 
'BHIF4602I301409', 'AMIF4402C112203', 'AMIF4402D103205', 'HBIF4402E104105', 'HBIF4402F107303', 'HSIF4602D105503', 'HSIF4945A102407', 'BSIF4913A302501', 'BSIF4701A501307', 'BSIF4701I101207', 'BSIF4602E106101', 'YPIF4101A108109', 'YPIF4202A111107', 'YPIF4202B301309', 'DPIF4202C112405', 'DPIF4202I103301', 'DPIF4957A104209', 'ARIF4202D107507', 'ARIF4202E105103', 'RLIF4401A102509', 'RLIF4401B302305', 'RLIF4401C501401', 'RLIF4902A101201', 'DSIF4202F106403', 'DSIF4202G108505', 'DSIF4404A111409', 'FBIF4605A301203', 'FBIF4605B112205', 'FBIF4504A103105', 'FBIF4406A104303', 'FBIF4406B107503', 'ABIF4401D105407', 'ABIF4401E102501', 'ABIF4401I302307', 'ISIF4401F501207', 'ISIF4401G101101', 'ISIF4401H106109', 'ISIF4504I108107', 'RRIF4963A111309', 'ALIF4964F301405', 'ALIF4603A112301', 'ALIF4406C103209', 'ALIF4406I104507', 'MNIF4605C107103', 'MNIF4605I105509', 'MNIF4404B102305', 'MKIF4404I302401', 'MNIF4966A501201', 'KRIF4404C101403', 'KRTI4411A106505', 'SCIF4404D108409', 'SCIF4403I111203', 'SCTI4411B301205', 'OJIF4946A112105', 'MLIF4101A103303', 'RJIF4605D104503', 'RJIF4605E107407', 'MRIF4903A105501', 'RNIF4404E102307', 'SRIF4404F302207', 'RNIF4603B501101', 'RNIF4603C101109', 'UYIF4603D106107', 'UYIF4603E108309', 'DOIF4603F111405', 'RNIF4603I301301', 'STIF4406D112209', 'SRIF4406E103507', 'SRIF4406F104103', 'RJIF4971A107509', 'STIF4972A105305', 'DAIF4403A102401', 'DAIF4403B302201', 'NSIF4403C501403', 'AYIF4403D101505', 'CFIF4403E106409', 'DHIF4403F108203', 'DAIF4951A111205', 'HTIF4952A301105', 'CFIF4958A112303', 'AWIF4405A103503', 'AWIF4405B104407', 'ASIF4405C107501', 'BAIF4405D105307', 'BAIF4405E102207', 'BAIF4405F302101', 'JLIF4405I501109', 'VHIF4604A101107', 'VHIF4604B106309', 'VHIF4604C108405', 'AWIF4604D111301', 'AWIF4604E301209', 'DZIF4604I112507', 'ASIF4922A103103', 'JLIF4921A104509', 'VHIF4304A107305', 'DZIF4304I105401', 'HFIF4601A102201', 'HFIF4602B302403', 'SAIF4603C501505', 'SAIF4604D101409', 'ABIF4605I106203', 'DHIF4935A108205', 'IMIF4933A111105', 'SAIF4934A301303', 'SAIF4502A112503', 'ABIF4502I103407', 'RLIF4982A104501', 'DAIF4986A107307', 'IMIF4985A105207', 'IMTI4411A102101', 'IMTI4411A302109', 'ABTI4411I501107', 'MMIF4914A101309']
    
    list_skpb =  ['SFSK9999A999101', 'SFSK9999B999103', 'SWSK9998A998107', 'SISK9997A997201', 'SMSK9996A996203', 'SSSK9995A999207', 'SMSK9996B996209', 'SKSK9994A994209', 'SFSK9999C999301', 'SFSK9999D999303', 'SWSK9998B998305', 'SSSK9995B995307', 'SMSK9996C996403', 'SKSK9994B994405', 'SISK9997B997501', 'SNSK9993A993503', 'SNSK9993B993504']
    x = 0
    y = 0
    z = 0 
    p = 0
    q=0
    sesi_tesisa = []
    kemungkinan_sesi = []
    print("Banyak individu ", len(individu))
    for i in range(len(sesi)):
        for j in range(len(data_ruangan)):
            kemungkinan_sesi.append(data_ruangan[j] + sesi[i])

    print("Kemungkinan sesi ", len(kemungkinan_sesi))    
    for i in range(len(individu)):
        cnt_day = 0
        # if individu[i][9:15] 
        for j in range(i+1,len(individu)):
            if individu[i][0:9] != individu[j][0:9]:
                # First constraint: Dosen yang sama tidak bisa mengajar 2 MK di waktu yang sama
                if individu[i][0:2] == individu[j][0:2]: # Sama dosen
                    if abs(int(individu[i][12:15]) - int(individu[j][12:15])) < 2: # Sama hari sesi
                        x = x + 1
                        print("X: " + individu[i] + " " + individu[j] ,int(individu[i][12:15]) , int(individu[j][12:15]))
                # Second constraint: Ruangan yang sama tidak dapat dipakai di waktu yang sama
                if individu[i][9:12] == individu[j][9:12]: # Sama ruangan
                    if abs(int(individu[i][12:15]) - int(individu[j][12:15])) < 2: # Sama hari sesi
                        y = y + 1
                        print("Y: " + individu[i] + " " + individu[j] ,int(individu[i][12:15]) , int(individu[j][12:15]))
                
                # Third constraint: Satu dosen maksimal mengajar 2x sehari
                if individu[i][0:2] == individu[j][0:2]: # Sama dosen
                    if individu[i][12] == individu[j][12]: # Sama hari
                        cnt_day = cnt_day + 1
                        # print("Z: " + individu[i] + " " + individu[j] ,int(individu[i][12]) , int(individu[j][12]))
                if cnt_day > 2:
                    cnt_day = cnt_day - 2
                    z = z + cnt_day
                
        p = p + skpbConstrain(individu[i], list_skpb)
        q = q + prefrensiConstraint(individu[i])
    

    # print("Kemungkinan sesi:\n", kemungkinan_sesi[:len(individu)])
    isincounter = 0
    for i in range(len(kemungkinan_sesi)):
        isincounter = 0
        for j in range(len(individu)):
            if individu[j][9:15] == kemungkinan_sesi[i]:
                isincounter = isincounter + 1
        for j in range(len(list_skpb)):
            if list_skpb[j][9:15] == kemungkinan_sesi[i] :
                isincounter = isincounter + 1
        if isincounter == 0:
            sesi_tesisa.append(kemungkinan_sesi[i])
        
    # sesi_ambil = random.sample(sesi_tesisa, len(individu))
    print (x,y,z,p,q)
    total = x + y +z + p + q
    print("Banyak sesi tersisa: ",len(sesi_tesisa))
    # print ("Sesi tersisa\n", sesi_tesisa)

main()